<!DOCTYPE html>
<html lang="el">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÎÎ± Ï€Î¯Î½ÎµÎ¹Ï‚ Î½ÎµÏÏŒ</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        .container {
            width: 350px;
            margin: 20px;
            background-color: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        h2 {
            color: #2c3e50;
            text-align: center;
        }
        input {
            padding: 10px;
            font-size: 16px;
            border: 1px solid #ddd;
            border-radius: 4px;
            width: 100%;
            box-sizing: border-box;
            margin-bottom: 10px;
        }
        .error {
            color: #ff4444;
            margin-top: 5px;
            font-weight: bold;
            font-style: italic;
            font-size: 12px;
        }
        .result {
            margin-top: 20px;
            font-size: 14px;
            background-color: #e8f5e9;
            padding: 10px;
            border-radius: 4px;
        }
        button {
            margin-top: 10px;
            padding: 10px;
            width: 100%;
            background-color: #db34a9;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #bd2d91;
        }
        #currentDate {
            margin-bottom: 15px;
            color: #db34a9;
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="currentDate"></div>
        <h2>ÎˆÎ»Î· Ï€ÏŒÏƒÎ± ÏƒÎ¿Ï… Î­Ï‡Î¿Ï…Î½ Î¼ÎµÎ¯Î½ÎµÎ¹;</h2>
        <input type="text" id="budgetInput" placeholder="Î¤ÏÎ­Ï‡Î¿Î½ Ï…Ï€ÏŒÎ»Î¿Î¹Ï€Î¿...">
        <div id="errorMessage" class="error"></div>
        <button id="calculateButton">Î¦ÏÎ³Î±Î¼Îµ Î´Î¹Î±ÎºÎ¿Ï€Î¬ÏÎµÏ‚!!!</button>
        <div id="result" class="result"></div>
    </div>

    <script>
        const input = document.getElementById('budgetInput');
        const errorMessage = document.getElementById('errorMessage');
        const calculateButton = document.getElementById('calculateButton');
        const result = document.getElementById('result');
        const currentDateElement = document.getElementById('currentDate');

        // Budget periods
        const periods = [
            { start: new Date(2024, 6, 5), end: new Date(2024, 6, 12), target: 192, nextDate: "12 Î™Î¿Ï…Î»Î¯Î¿Ï…", nextPayday: '<b>Î•Ï€ÏŒÎ¼ÎµÎ½Î· MÎ¹ÏƒÎ¸Î¿Î´Î¿ÏƒÎ¯Î±:</b><br>Î Î±ÏÎ±ÏƒÎºÎµÏ…Î® 12 Î™Î¿Ï…Î»Î¯Î¿Ï…, <b>700 ÎµÏ…ÏÏ.</b>', commingExpenses: '<b>Î•ÏÏ‡ÏŒÎ¼ÎµÎ½Î± ÎˆÎ¾Î¿Î´Î±:</b><br> 320 ÎµÎ½Î¿Î¯ÎºÎ¹Î¿<br>70 ÏÎµÏÎ¼Î±<br>10 Î½ÎµÏÏŒ<br>40 Ï„Î·Î»Î­Ï†Ï‰Î½Î¿<br>75 Ï‡Î¿ÏÏŒÏ‚<br>=<b>515 ÎµÏ…ÏÏ</b>' },
            { start: new Date(2024, 6, 13), end: new Date(2024, 7, 7), target: 182, nextDate: "8 Î‘Ï…Î³Î¿ÏÏƒÏ„Î¿Ï…", nextPayday: '<b>Î•Ï€ÏŒÎ¼ÎµÎ½Î· MÎ¹ÏƒÎ¸Î¿Î´Î¿ÏƒÎ¯Î±:</b><br>Î¤ÎµÏ„Î¬ÏÏ„Î· 7 Î‘Ï…Î³Î¿ÏÏƒÏ„Î¿Ï…, <b>350 ÎµÏ…ÏÏ.</b> ÎœÏ€ÏŒÎ½Î¿Ï…Ï‚ Î´Î¹Î±ÎºÎ¿Ï€ÏÎ½.', commingExpenses: '<b>Î•ÏÏ‡ÏŒÎ¼ÎµÎ½Î± ÎˆÎ¾Î¿Î´Î±:</b><br> 250 Î¾ÎµÎ½Î¿Î´Î¿Ï‡ÎµÎ¯Î¿ Î™Ï„Î±Î»Î¯Î±<br>250 Î»Î¿Î¹Ï€Î¬ Î­Î¾Î¿Î´Î±<br>=<b>500 ÎµÏ…ÏÏ</b>' },
            { start: new Date(2024, 7, 8), end: new Date(2024, 7, 12), target: 32, nextDate: "12 Î‘Ï…Î³Î¿ÏÏƒÏ„Î¿Ï…", nextPayday: '<b>Î•Ï€ÏŒÎ¼ÎµÎ½Î· MÎ¹ÏƒÎ¸Î¿Î´Î¿ÏƒÎ¯Î±:</b><br>Î”ÎµÏ…Ï„Î­ÏÎ± 12 Î‘Ï…Î³Î¿ÏÏƒÏ„Î¿Ï…, <b>750 ÎµÏ…ÏÏ.</b>', commingExpenses: '<b>Î•ÏÏ‡ÏŒÎ¼ÎµÎ½Î± ÎˆÎ¾Î¿Î´Î±:</b><br> 320 ÎµÎ½Î¿Î¯ÎºÎ¹Î¿<br>70 ÏÎµÏÎ¼Î±<br>10 Î½ÎµÏÏŒ<br>40 Ï„Î·Î»Î­Ï†Ï‰Î½Î¿<br>=<b>440 ÎµÏ…ÏÏ</b>'  },
            { start: new Date(2024, 7, 13), end: new Date(2024, 7, 25), target: 140, nextDate: "25 Î‘Ï…Î³Î¿ÏÏƒÏ„Î¿Ï…", nextPayday: '', commingExpenses: '<b>ÎˆÎ¾Î¿Î´Î± Î³Î¹Î± ÎšÏÎ®Ï„Î·:</b><br>100 ÏƒÏ„Î± Î§Î±Î½Î¹Î¬<br>60 ÏƒÏ„Î· Î“Î±ÏÎ´Î¿<br>40 Î³Î¹Î± ÏŒÏ„Î¹ Î¬Î»Î»Î¿ Î¸Î­Î»ÎµÎ¹Ï‚ Î½Î± Ï€Î±ÏÎµÎ¹Ï‚<br>=<b>200 ÎµÏ…ÏÏ</b>'  },
        ];

        function getCurrentPeriod(date) {
            for (let period of periods) {
                if (date >= period.start && date <= period.end) {
                    return period;
                }
            }
            return null;
        }

        function formatDate(date) {
            const options = { year: 'numeric', month: 'long', day: 'numeric' };
            return date.toLocaleDateString('el-GR', options);
        }

        // Set current date and period
        const currentDate = new Date();
        const currentPeriod = getCurrentPeriod(currentDate);
        currentDateElement.textContent = `Î—Î¼/Î½Î¹Î±: ${formatDate(currentDate)}`;

        input.addEventListener('input', function(e) {
            const value = e.target.value;
            const oldValue = this.oldValue || "";
            const oldSelectionStart = this.oldSelectionStart || 0;
            
            if (/^\d*$/.test(value)) {
                this.oldValue = value;
                this.oldSelectionStart = this.selectionStart;
                errorMessage.textContent = "";
            } else {
                if (value.includes('.') || value.includes(',')) {
                    errorMessage.textContent = "Î• Î¼Î·Î½ Î¼Î¿Ï… Î¼ÎµÏ„ÏÎ¬Ï‚ ÎºÎ±Î¹ Ï„Î¿ Î»ÎµÏ€Ï„ÏŒ, ÎµÎ¯Î¼Î±ÏƒÏ„Îµ large! Î’Î¬Î»Îµ ÏƒÏ„ÏÎ¿Î³Î³Ï…Î»ÏŒ Ï€Î¿ÏƒÏŒ.";
                } else {
                    errorMessage.textContent = "Î‘Ï…Ï„Î¬ Ï„Î± Î´Î±ÎºÏ„Ï…Î»Î¬ÎºÎ¹Î± Î³Î¹Î±Ï„Î¯ Ï€Î±Ï„Î¬Î½Îµ Î¬Î»Î»Î± ÎºÎ¿Ï…Î¼Ï€Î¹Î¬; ÎœÎ¿Î½ÏŒ Î±ÏÎ¹Î¸Î¼Î¿Î¯ ÎµÎ´Ï.";
                }
                this.value = oldValue;
                this.setSelectionRange(oldSelectionStart, oldSelectionStart);
            }
        });

        calculateButton.addEventListener('click', function() {
            const budget = parseInt(input.value);
            
            if (isNaN(budget)) {
                result.textContent = "Î’Î¬Î»Îµ Ï€Î¿ÏƒÏŒ Î²ÏÎµ, Î´ÎµÎ½ Î¸Î± Ï†Ï‰Î½Î¬Î¾Ï‰ ğŸ˜œ";
                return;
            }

            if (!currentPeriod) {
                result.textContent = "ÎŸÏ…Ï€Ï‚! ÎšÎ¬Ï„Î¹ Ï‡Î¬Î»Î±ÏƒÎµ, ÏƒÏ„ÎµÎ¯Î»Îµ Î¼Î¿Ï… Î¼Î®Î½Ï…Î¼Î± Î½Î± Î´Ï‰ Ï„Î¹ Î­Î³Î¹Î½Îµ!! ğŸ¤”";
                return;
            }

            const { target, nextDate, nextPayday, commingExpenses } = currentPeriod;
            const difference = budget - target;
            periodDifference = (currentPeriod.end - currentDate) / (1000 * 60 * 60 * 24)
            console.log(periodDifference);
            let message;
            if(periodDifference === 0) {
                message = 'Î—Î¼Î­ÏÎ± Î¼Î¹ÏƒÎ¸Î¿Î´Î¿ÏƒÎ¯Î±Ï‚, Î½Î± Ï€Î»Î·ÏÏÏƒÎµÎ¹Ï‚ Ï„Î± ÎµÏÏ‡ÏŒÎ¼ÎµÎ½Î± Î­Î¾Î¿Î´Î±!';
            } else {
                message = difference >= 0
                ? `Î•Î¯ÏƒÎ±Î¹ <b>${difference}â‚¬</b> Ï€Î¬Î½Ï‰ Î±Ï€ÏŒ Ï„Î¿ ÏƒÏ„ÏŒÏ‡Î¿.<br>Î ÏÎ­Ï€ÎµÎ¹ Î½Î± Ï€ÎµÏÎ±ÏƒÎµÎ¹Ï‚ ${Math.ceil(periodDifference)} Î·Î¼Î­ÏÎµÏ‚ Î¼Îµ Î±Ï…Ï„Î¬ Ï„Î± Î»ÎµÏ†Ï„Î¬ Î¼Î­Ï‡ÏÎ¹ ${nextDate}.`
                : `Î§Î¼Î¼, ÎµÎ¯ÏƒÎ±Î¹ <b>${-difference}â‚¬</b> ÎºÎ¬Ï„Ï‰ Î±Ï€ÏŒ Ï„Î¿ ÏƒÏ„ÏŒÏ‡Î¿.`;
            }
            result.innerHTML = `<b>Î£Ï„ÏŒÏ‡Î¿Ï‚ Î³Î¹Î± ${nextDate}: ${target}â‚¬</b><br><br>${message}<br><br>${nextPayday}<br><br>${commingExpenses}`;
        });
    </script>
</body>
</html>
